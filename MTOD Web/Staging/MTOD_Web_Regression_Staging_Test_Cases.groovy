def jobsList = [
[
  jobTitle: 'Account - accountPageUI - MWBU-12753',
  COMPONENT: 'account',
  TESTCASE: 'accountPageUI'],
[
  jobTitle: 'Account - editPassword - MWBU-12748',
  COMPONENT: 'account',
  TESTCASE: 'editPassword'],
[
  jobTitle: 'Account - invoice - MWBU-16083',
  COMPONENT: 'account',
  TESTCASE: 'invoice'],
[
  jobTitle: 'Account - manageSubscription - MWBU-13033',
  COMPONENT: 'account',
  TESTCASE: 'manageSubscription'],
[
  jobTitle: 'Account - resubscribeAfterTermination - MWBU-13929',
  COMPONENT: 'account',
  TESTCASE: 'resubscribeAfterTermination'],
[
  jobTitle: 'Account - resumeAfterCancel - MWBU-13059',
  COMPONENT: 'account',
  TESTCASE: 'resumeAfterCancel'],
[
  jobTitle: 'Account - updateName - MWBU-12744',
  COMPONENT: 'account',
  TESTCASE: 'updateName'],
[
  jobTitle: 'Account - updatePaymentMethod - MWBU-15030',
  COMPONENT: 'account',
  TESTCASE: 'updatePaymentMethod'],
[
  jobTitle: 'Analytics Adobe - anonymousUserIDHandling - MWBU-13532',
  COMPONENT: 'analyticsAdobe',
  TESTCASE: 'anonymousUserIDHandling'],
[
  jobTitle: 'Analytics Adobe - cancelledAccount - MWBU-14064',
  COMPONENT: 'analyticsAdobe',
  TESTCASE: 'cancelledAccount'],
[
  jobTitle: 'Analytics Adobe - carouselShowClickCall - MWBU-15259',
  COMPONENT: 'analyticsAdobe',
  TESTCASE: 'carouselShowClickCall'],
[
  jobTitle: 'Analytics Adobe - chooseYourPlan - MWBU-13573',
  COMPONENT: 'analyticsAdobe',
  TESTCASE: 'chooseYourPlan'],
[
  jobTitle: 'Analytics Adobe - helpButton - MWBU-14517',
  COMPONENT: 'analyticsAdobe',
  TESTCASE: 'helpButton'],
[
  jobTitle: 'Analytics Adobe - paymentTypeScreen - MWBU-13606',
  COMPONENT: 'analyticsAdobe',
  TESTCASE: 'paymentTypeScreen'],
[
  jobTitle: 'Analytics Adobe - subsVarsAvodUsers - MWBU-13615',
  COMPONENT: 'analyticsAdobe',
  TESTCASE: 'subsVarsAvodUsers'],
[
  jobTitle: 'Analytics Adobe - subsVarsSvodUsers - MWBU-13616',
  COMPONENT: 'analyticsAdobe',
  TESTCASE: 'subsVarsSvodUsers'],
[
  jobTitle: 'Carousel - carouselsAppear - MWBU-12637',
  COMPONENT: 'carousel',
  TESTCASE: 'carouselsAppear'],
[
  jobTitle: 'Carousel - regUserFreeVideoRail - MWBU-16439',
  COMPONENT: 'carousel',
  TESTCASE: 'regUserFreeVideoRail'],
[
  jobTitle: 'Carousel - userNavigatesCarousel - MWBU-12638',
  COMPONENT: 'carousel',
  TESTCASE: 'userNavigatesCarousel'],
[
  jobTitle: 'Carousel - freeVideoRail - MWBU-16408',
  COMPONENT: 'carousel',
  TESTCASE: 'freeVideoRail'],
[
  jobTitle: 'Categories - categoryPageLoadsAsExpected - MWBU-13574',
  COMPONENT: 'categories',
  TESTCASE: 'categoryPageLoadsAsExpected'],
[
  jobTitle: 'Categories - userIsAbletoScroll - MWBU-13575',
  COMPONENT: 'categories',
  TESTCASE: 'userIsAbleToScroll'],
[
  jobTitle: 'Continue Watching - continueWatchingUI - MWBU-12984',
  COMPONENT: 'continueWatching',
  TESTCASE: 'continueWatchingUI'],
[
  jobTitle: 'Continue Watching - removeFromContinueWatching - MWBU-13012',
  COMPONENT: 'continueWatching',
  TESTCASE: 'removeFromContinueWatching'],
[
  jobTitle: 'Continue Watching - userNotSignedIn - MWBU-12992',
  COMPONENT: 'continueWatching',
  TESTCASE: 'userNotSignedIn'],
[
  jobTitle: 'Continue Watching - videoAddedAfterPlayed - MWBU-14423',
  COMPONENT: 'continueWatching',
  TESTCASE: 'videoAddedAfterPlayed'],
[
  jobTitle: 'Digital Magazines - publicationPageSubsUserExperience - MWBU-16916',
  COMPONENT: 'digitalMagazines',
  TESTCASE: 'publicationPageSubsUserExperience'],
[
  jobTitle: 'Digital Magazines - publicationPageUserExperience - MWBU-16933',
  COMPONENT: 'digitalMagazines',
  TESTCASE: 'publicationPageUserExperience'],
[
  jobTitle: 'Episode Detail Page - episodeCardUI - MWBU-12857',
  COMPONENT: 'episodeDetailPage',
  TESTCASE: 'episodeCardUI'],
[
  jobTitle: 'Episode Detail Page - episodeDetailPageUI - MWBU-12752',
  COMPONENT: 'episodeDetailPage',
  TESTCASE: 'episodeDetailPageUI'],
[
  jobTitle: 'Episode Detail Page - episodeDetailSectionUI - MWBU-12757',
  COMPONENT: 'episodeDetailPage',
  TESTCASE: 'episodeDetailSectionUI'],
[
  jobTitle: 'Episode Detail Page - myStuffIcon - MWBU-14428',
  COMPONENT: 'episodeDetailPage',
  TESTCASE: 'myStuffIcon'],
[
  jobTitle: 'Episode Detail Page - myStuffIconWorksEp - MWBU-14654',
  COMPONENT: 'episodeDetailPage',
  TESTCASE: 'myStuffIconWorksEp'],
[
  jobTitle: 'Episode Detail Page - navigationPlayback - MWBU-12640',
  COMPONENT: 'episodeDetailPage',
  TESTCASE: 'navigationPlayback'],
[
  jobTitle: 'Episode Detail Page - noLockIconForSVOD - MWBU-14433',
  COMPONENT: 'episodeDetailPage',
  TESTCASE: 'noLockIconForSVOD'],
[
  jobTitle: 'Episode Detail Page - readMore - MWBU-12762',
  COMPONENT: 'episodeDetailPage',
  TESTCASE: 'readMore'],
[
  jobTitle: 'Episode Detail Page - regUserEpisodeDetailSection - MWBU-16493',
  COMPONENT: 'episodeDetailPage',
  TESTCASE: 'regUserEpisodeDetailSection'],
[
  jobTitle: 'Episode Detail Page - regUserPremiumThumbnail - MWBU-16498',
  COMPONENT: 'episodeDetailPage',
  TESTCASE: 'regUserPremiumThumbnail'],
[
  jobTitle: 'Episode Detail Page - seasonSection - MWBU-12763',
  COMPONENT: 'episodeDetailPage',
  TESTCASE: 'seasonSection'],
[
  jobTitle: 'Episode Detail Page - anonUserShowPageCTA - MWBU-16484',
  COMPONENT: 'episodeDetailPage',
  TESTCASE: 'anonUserShowPageCTA'],
[
  jobTitle: 'Feature Episode Slider - navigateTheCarousel - MWBU-12634',
  COMPONENT: 'featureEpisodeSlider',
  TESTCASE: 'navigateTheCarousel'],
[
  jobTitle: 'Feature Episode Slider - subsUserHomePageUI - MWBU-14434',
  COMPONENT: 'featureEpisodeSlider',
  TESTCASE: 'subsUserHomePageUI'],
[
  jobTitle: 'Front Porch - frontPorchFunctionality - MWBU-14792',
  COMPONENT: 'frontPorch',
  TESTCASE: 'frontPorchFunctionality'],
[
  jobTitle: 'Front Porch - frontPorchOverview - MWBU-14788',
  COMPONENT: 'frontPorch',
  TESTCASE: 'frontPorchOverview'],
[
  jobTitle: 'Header - anonUserStickyHeader - MWBU-16412',
  COMPONENT: 'header',
  TESTCASE: 'anonUserStickyHeader'],
[
  jobTitle: 'Header - anonUserStickyHeaderR - MWBU-16396',
  COMPONENT: 'header',
  TESTCASE: 'anonUserStickyHeaderR'],
[
  jobTitle: 'Header - anonUserTopNavigation - MWBU-16395',
  COMPONENT: 'header',
  TESTCASE: 'anonUserTopNavigation'],
[
  jobTitle: 'Header - nonSubscribedUserUI - MWBU-12745',
  COMPONENT: 'header',
  TESTCASE: 'nonSubscribedUserUI'],
[
  jobTitle: 'Header - noSubsOptionsRedirect - MWBU-12746',
  COMPONENT: 'header',
  TESTCASE: 'noSubsOptionsRedirect'],
[
  jobTitle: 'Header - regUserStickyHeader - MWBU-16452',
  COMPONENT: 'header',
  TESTCASE: 'regUserStickyHeader'],
[
  jobTitle: 'Header - stickyHeaderUI - MWBU-12756',
  COMPONENT: 'header',
  TESTCASE: 'stickyHeaderUI'],
[
  jobTitle: 'Header - subscribedUserUI - MWBU-14430',
  COMPONENT: 'header',
  TESTCASE: 'subscribedUserUI'],
[
  jobTitle: 'Header - subsUserIsRedirected - MWBU-14429',
  COMPONENT: 'header',
  TESTCASE: 'subsUserIsRedirected'],
[
  jobTitle: 'HeroImage - regUserHeroImage - MWBU-16516',
  COMPONENT: 'heroImage',
  TESTCASE: 'regUserHeroImage'],
[
  jobTitle: 'HeroImage - anonHeroImage - MWBU-16397',
  COMPONENT: 'heroImage',
  TESTCASE: 'anonHeroImage'],
[
  jobTitle: 'Landing Page - retiredBauLandingPages - MWBU-13821',
  COMPONENT: 'landingPage',
  TESTCASE: 'retiredBauLandingPages'],
[
  jobTitle: 'Landing Page - sonicLandingPages - MWBU-13820',
  COMPONENT: 'landingPage',
  TESTCASE: 'sonicLandingPages'],
[
  jobTitle: 'Mparticle - contentImpressionOnHeroSlider - MWBU-16777',
  COMPONENT: 'mParticle',
  TESTCASE: 'contentImpressionOnHeroSlider'],
[
  jobTitle: 'Mparticle - dMMagazineIssueEvent - MWBU-16925',
  COMPONENT: 'mParticle',
  TESTCASE: 'dMMagazineIssueEvent'],
[
  jobTitle: 'Mparticle - dMpageViewBrandSingleYear - MWBU-16927',
  COMPONENT: 'mParticle',
  TESTCASE: 'dMpageViewBrandSingleYear'],
[
  jobTitle: 'Mparticle - dMpageViewBrandYear - MWBU-16926',
  COMPONENT: 'mParticle',
  TESTCASE: 'dMpageViewBrandYear'],
[
  jobTitle: 'Mparticle - marketingTrackingEventsForCampaigns - MWBU-16961',
  COMPONENT: 'mParticle',
  TESTCASE: 'marketingTrackingEventsForCampaigns'],
[
  jobTitle: 'Mparticle - pageViewDigitalMagazine - MWBU-16924',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewDigitalMagazine'],
[
  jobTitle: 'Mparticle - pageViewOnAccessMyData - MWBU-16711',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnAccessMyData'],
[
  jobTitle: 'Mparticle - pageViewOnAddNewCard - MWBU-16709',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnAddNewCard'],
[
  jobTitle: 'Mparticle - pageViewOnBillingHistory - MWBU-16706',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnBillingHistory'],
[
  jobTitle: 'Mparticle - pageViewOnCancelSubscription - MWBU-16708',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnCancelSubscription'],
[
  jobTitle: 'Mparticle - pageViewOnCommunicationPreferences - MWBU-16707',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnCommunicationPreferences'],
[
  jobTitle: 'Mparticle - pageViewOnContinueWatching - MWBU-16723',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnContinueWatching'],
[
  jobTitle: 'Mparticle - pageViewOnCookiePolicy - MWBU-16726',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnCookiePolicy'],
[
  jobTitle: 'Mparticle - pageViewOnForgotPassword - MWBU-16712',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnForgotPassword'],
[
  jobTitle: 'Mparticle - pageViewOnHomePage - MWBU-16488',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnHomePage'],
[
  jobTitle: 'Mparticle - pageViewOnInfoAboutMyData - MWBU-16727',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnInfoAboutMyData'],
[
  jobTitle: 'Mparticle - pageViewOnLoginPage - MWBU-16659',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnLoginPage'],
[
  jobTitle: 'Mparticle - pageViewOnManageSubscription - MWBU-16704',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnManageSubscription'],
[
  jobTitle: 'Mparticle - pageViewOnMyAccountPage - MWBU-16700',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnMyAccountPage'],
[
  jobTitle: 'Mparticle - pageViewOnMyListPage - MWBU-16660',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnMyListPage'],
[
  jobTitle: 'Mparticle - pageViewOnPaypalUpdate - MWBU-16710',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnPaypalUpdate'],
[
  jobTitle: 'Mparticle - pageViewOnPrivacyPolicy - MWBU-16724',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnPrivacyPolicy'],
[
  jobTitle: 'Mparticle - pageViewOnRegistrationP1 - MWBU-16455',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnRegistrationP1'],
[
  jobTitle: 'Mparticle - pageViewOnRegistrationP2 - MWBU-16456',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnRegistrationP2'],
[
  jobTitle: 'Mparticle - pageViewOnRegistrationP3 - MWBU-16457',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnRegistrationP3'],
[
  jobTitle: 'Mparticle - pageViewOnSearchPage - MWBU-16699',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnSearchPage'],
[
  jobTitle: 'Mparticle - pageViewOnShowPage - MWBU-16539',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnShowPage'],
[
  jobTitle: 'Mparticle - pageViewOnTermsOfUse - MWBU-16725',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnTermsOfUse'],
[
  jobTitle: 'Mparticle - pageViewOnUpdateEmail - MWBU-16701',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnUpdateEmail'],
[
  jobTitle: 'Mparticle - pageViewOnUpdatePassword - MWBU-16702',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnUpdatePassword'],
[
  jobTitle: 'Mparticle - pageViewOnUpdatePaymentMethod - MWBU-16705',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnUpdatePaymentMethod'],
[
  jobTitle: 'Mparticle - pageViewOnUpdateProfile - MWBU-16703',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnUpdateProfile'],
[
  jobTitle: 'Mparticle - registeredUserInfoLogin - MWBU-16645',
  COMPONENT: 'mParticle',
  TESTCASE: 'registeredUserInfoLogin'],
[
  jobTitle: 'Mparticle - sdkAndLiveFeed - MWBU-16246',
  COMPONENT: 'mParticle',
  TESTCASE: 'sdkAndLiveFeed'],
[
  jobTitle: 'Mux - changingTheSource - MWBU-15222',
  COMPONENT: 'mux',
  TESTCASE: 'changingTheSource'],
[
  jobTitle: 'Mux - watchTime - MWBU-15221',
  COMPONENT: 'mux',
  TESTCASE: 'watchTime'],
[
  jobTitle: 'MyStuff - myStuffCardsWork - MWBU-12859',
  COMPONENT: 'myStuff',
  TESTCASE: 'myStuffCardsWork'],
[
  jobTitle: 'MyStuff - myStuffUI - MWBU-12858',
  COMPONENT: 'myStuff',
  TESTCASE: 'myStuffUI'],
[
  jobTitle: 'MyStuff - regUserMyStuffUI - MWBU-16494',
  COMPONENT: 'myStuff',
  TESTCASE: 'regUserMyStuffUI'],
[
  jobTitle: 'MyStuff - addToMyStuffFromDeeplinks - MWBU-16596',
  COMPONENT: 'myStuff',
  TESTCASE: 'addToMyStuffFromDeeplinks'],
[
  jobTitle: 'Run Locally - Support Links - footerLinksRedirect - MWBU-12777',
  COMPONENT: 'supportLinks',
  TESTCASE: 'footerLinksRedirect'],
[
  jobTitle: 'Search - clickShowAndEpCards - MWBU-12854',
  COMPONENT: 'search',
  TESTCASE: 'clickShowAndEpCards'],
[
  jobTitle: 'Search - noLockIconIfSubscribed - MWBU-14431',
  COMPONENT: 'search',
  TESTCASE: 'noLockIconIfSubscribed'],
[
  jobTitle: 'Search - noResults - MWBU-12771',
  COMPONENT: 'search',
  TESTCASE: 'noResults'],
[
  jobTitle: 'Search - searchUI - MWBU-12945',
  COMPONENT: 'search',
  TESTCASE: 'searchUI'],
[
  jobTitle: 'Seo - canonicalRefAppears - MWBU-16256',
  COMPONENT: 'seo',
  TESTCASE: 'canonicalRefAppears'],
[
  jobTitle: 'Seo - carouselsAndRailsHaveProperTag - MWBU-16188',
  COMPONENT: 'seo',
  TESTCASE: 'carouselsAndRailsHaveProperTag'],
[
  jobTitle: 'Seo - coreWebVitalsLockIconSize - MWBU-16195',
  COMPONENT: 'seo',
  TESTCASE: 'coreWebVitalsLockIconSize'],
[
  jobTitle: 'Seo - coreWebVitalsWebpImage - MWBU-16196',
  COMPONENT: 'seo',
  TESTCASE: 'coreWebVitalsWebpImage'],
[
  jobTitle: 'Seo - epDetailPageNameInProperTag - MWBU-16186',
  COMPONENT: 'seo',
  TESTCASE: 'epDetailPageNameInProperTag'],
[
  jobTitle: 'Seo - showPageHeading - MWBU-16187',
  COMPONENT: 'seo',
  TESTCASE: 'showPageHeading'],
[
  jobTitle: 'Seo - showPageMetaDescription - MWBU-16275',
  COMPONENT: 'seo',
  TESTCASE: 'showPageMetaDescription'],
[
  jobTitle: 'Run Locally - Seo - sitemapXmlContent - MWBU-13520',
  COMPONENT: 'seo',
  TESTCASE: 'sitemapXmlContent'],
[
  jobTitle: 'Seo - talentPageHasProperTags - MWBU-15946',
  COMPONENT: 'seo',
  TESTCASE: 'talentPageHasProperTags'],
[
  jobTitle: 'Seo - talentPageImageOptimization - MWBU-15948',
  COMPONENT: 'seo',
  TESTCASE: 'talentPageImageOptimization'],
[
  jobTitle: 'Seo - talentPageQALoads - MWBU-15949',
  COMPONENT: 'seo',
  TESTCASE: 'talentPageQALoads'],
[
  jobTitle: 'Seo - talentPageSchemasFormatted - MWBU-15945',
  COMPONENT: 'seo',
  TESTCASE: 'talentPageSchemasFormatted'],
[
  jobTitle: 'Seo - talentPageUrlAndHeadersFormat - MWBU-15944',
  COMPONENT: 'seo',
  TESTCASE: 'talentPageUrlAndHeadersFormat'],
[
  jobTitle: 'Show Card - myStuffIcon - MWBU-14653',
  COMPONENT: 'showCard',
  TESTCASE: 'myStuffIcon'],
[
  jobTitle: 'Show Card - myStuffIconWorks - MWBU-14664',
  COMPONENT: 'showCard',
  TESTCASE: 'myStuffIconWorks'],
[
  jobTitle: 'Show Card - showCard - MWBU-13023',
  COMPONENT: 'showCard',
  TESTCASE: 'showCard'],
[
  jobTitle: 'Show Card - showCardUI - MWBU-13021',
  COMPONENT: 'showCard',
  TESTCASE: 'showCardUI'],
[
  jobTitle: 'Show Detail Page - descriptionSection - MWBU-12856',
  COMPONENT: 'showDetailPage',
  TESTCASE: 'descriptionSection'],
[
  jobTitle: 'Show Detail Page - regUserMyStuffIcon - MWBU-15454',
  COMPONENT: 'showDetailPage',
  TESTCASE: 'regUserMyStuffIcon'],
[
  jobTitle: 'Show Detail Page - showDetailPageFunctionality - MWBU-15110',
  COMPONENT: 'showDetailPage',
  TESTCASE: 'showDetailPageFunctionality'],
[
  jobTitle: 'Show Detail Page - showDetailPageHeroLayout - MWBU-15451',
  COMPONENT: 'showDetailPage',
  TESTCASE: 'showDetailPageHeroLayout'],
[
  jobTitle: 'Show Detail Page - showDetailPageUI - MWBU-15087',
  COMPONENT: 'showDetailPage',
  TESTCASE: 'showDetailPageUI'],
[
  jobTitle: 'Show Detail Page - freeEpisodesRailRedesign - MWBU-16031',
  COMPONENT: 'showDetailPage',
  TESTCASE: 'freeEpisodesRailRedesign'],
[
  jobTitle: 'Sign In - fromVideoDetail - MWBU-12967',
  COMPONENT: 'signIn',
  TESTCASE: 'fromVideoDetail'],
[
  jobTitle: 'Sign In - signIn - MWBU-12964',
  COMPONENT: 'signIn',
  TESTCASE: 'signIn'],
[
  jobTitle: 'Sign In - signInConnectedDevice - MWBU-14323',
  COMPONENT: 'signIn',
  TESTCASE: 'signInConnectedDevice'],
[
  jobTitle: 'Sign In - signInExpired - MWBU-12962',
  COMPONENT: 'signIn',
  TESTCASE: 'signInExpired'],
[
  jobTitle: 'Sign In - signInInvalid - MWBU-12954',
  COMPONENT: 'signIn',
  TESTCASE: 'signInInvalid'],
[
  jobTitle: 'Sign In - signInLinks - MWBU-12961',
  COMPONENT: 'signIn',
  TESTCASE: 'signInLinks'],
[
  jobTitle: 'Sign In - signInUI - MWBU-12942',
  COMPONENT: 'signIn',
  TESTCASE: 'signInUI'],
[
  jobTitle: 'SubFlow - choosePayment - MWBU-15027',
  COMPONENT: 'subFlow',
  TESTCASE: 'choosePayment'],
[
  jobTitle: 'SubFlow - Create Account - MWBU-13873',
  COMPONENT: 'subFlow',
  TESTCASE: 'createAccount'],
[
  jobTitle: 'SubFlow - links - MWBU-13878',
  COMPONENT: 'subFlow',
  TESTCASE: 'links'],
[
  jobTitle: 'SubFlow - monthlyPaypal - MWBU-13887',
  COMPONENT: 'subFlow',
  TESTCASE: 'monthlyPaypal'],
[
  jobTitle: 'SubFlow - notCompletedAccount - MWBU-13877',
  COMPONENT: 'subFlow',
  TESTCASE: 'notCompletedAccount'],
[
  jobTitle: 'SubFlow - paidMediaPixel - MWBU-14635',
  COMPONENT: 'subFlow',
  TESTCASE: 'paidMediaPixel'],
[
  jobTitle: 'SubFlow - redeemCode - MWBU-15080',
  COMPONENT: 'subFlow',
  TESTCASE: 'redeemCode'],
[
  jobTitle: 'SubFlow - redeemSpecial - MWBU-13880',
  COMPONENT: 'subFlow',
  TESTCASE: 'redeemSpecial'],
[
  jobTitle: 'SubFlow - selectPlan - MWBU-13874',
  COMPONENT: 'subFlow',
  TESTCASE: 'selectPlan'],
[
  jobTitle: 'SubFlow - anonUserHomepagePlans - MWBU-16402',
  COMPONENT: 'subFlow',
  TESTCASE: 'anonUserHomepagePlans'],
[
  jobTitle: 'SubFlow - anonUserRegistrationFlow - MWBU-16403',
  COMPONENT: 'subFlow',
  TESTCASE: 'anonUserRegistrationFlow'],
[
  jobTitle: 'Support Links - footerLinks - MWBU-12776',
  COMPONENT: 'supportLinks',
  TESTCASE: 'footerLinks'],
[
  jobTitle: 'Support Links - siteMapPage - MWBU-13136',
  COMPONENT: 'supportLinks',
  TESTCASE: 'siteMapPage'],
[
  jobTitle: 'Talent Index - talentIndexOverview - MWBU-15732',
  COMPONENT: 'talentIndex',
  TESTCASE: 'talentIndexOverview'],
[
  jobTitle: 'UIUX - imageService - MWBU-14091',
  COMPONENT: 'uiux',
  TESTCASE: 'imageService'],
[
  jobTitle: 'Video Player - autoPlayFromFreeToPremium - MWBU-14390',
  COMPONENT: 'videoPlayer',
  TESTCASE: 'autoPlayFromFreeToPremium'],
[
  jobTitle: 'Run Locally - Video Player - autoPlayNext - MWBU-13601',
  COMPONENT: 'videoPlayer',
  TESTCASE: 'autoPlayNext'],
[
  jobTitle: 'Video Player - autoPlayUI - MWBU-13600',
  COMPONENT: 'videoPlayer',
  TESTCASE: 'autoPlayUI'],
[
  jobTitle: 'Video Player - closedCaptions - MWBU-13590',
  COMPONENT: 'videoPlayer',
  TESTCASE: 'closedCaptions'],
[
  jobTitle: 'Video Player - regUserAutoPlayNext - MWBU-16497',
  COMPONENT: 'videoPlayer',
  TESTCASE: 'regUserAutoPlayNext'],
[
  jobTitle: 'Mparticle - pageViewOnEpisodePage - MWBU-16540',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnEpisodePage'],
[
  jobTitle: 'Mparticle - pageViewOnWatchLive - MWBU-16697',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnWatchLive'],
[
  jobTitle: 'Mparticle - pageViewOnDeviceActivation - MWBU-16744',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnDeviceActivation'],
[
  jobTitle: 'Mparticle - pageViewOnViewInvoice - MWBU-16745',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnViewInvoice'],
[
  jobTitle: 'Mparticle - pageViewOnSearchResults - MWBU-16746',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnSearchResults'],
[
  jobTitle: 'Mparticle - pageViewOnAboutUs - MWBU-16784',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnAboutUs'],
[
  jobTitle: 'Mparticle - pageViewOnSiteMap - MWBU-16785',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnSiteMap'],
[
  jobTitle: 'Mparticle - pageViewOnSupportedDevices - MWBU-16786',
  COMPONENT: 'mParticle',
  TESTCASE: 'pageViewOnSupportedDevices']
]

// The following is the list of the temporary removed jobs
/*
def removedJobsList = [
[
  jobTitle: 'Analytics Adobe - accountCreationEmptyCart - MWBU-13572',
  COMPONENT: 'analyticsAdobe',
  TESTCASE: 'accountCreationEmptyCart'],
[
  jobTitle: 'Analytics Adobe - addingEpisodeToBookmarks - MWBU-14704',
  COMPONENT: 'analyticsAdobe',
  TESTCASE: 'addingEpisodeToBookmarks'],
[
  jobTitle: 'Analytics Adobe - addingShowToBookmarks - MWBU-14703',
  COMPONENT: 'analyticsAdobe',
  TESTCASE: 'addingShowToBookmarks'],
[
  jobTitle: 'Analytics Adobe - extrasTab - MWBU-15382',
  COMPONENT: 'analyticsAdobe',
  TESTCASE: 'extrasTab'],
[
  jobTitle: 'Analytics Adobe - freetrialLandingPage - MWBU-13587',
  COMPONENT: 'analyticsAdobe',
  TESTCASE: 'freetrialLandingPage'],
[
  jobTitle: 'Analytics Adobe - frontPorch - MWBU-14903',
  COMPONENT: 'analyticsAdobe',
  TESTCASE: 'frontPorch'],
[
  jobTitle: 'Analytics Adobe - paymentScreen - MWBU-13612',
  COMPONENT: 'analyticsAdobe',
  TESTCASE: 'paymentScreen'],
[
  jobTitle: 'Analytics Adobe - removingFromBookmarks - MWBU-14705',
  COMPONENT: 'analyticsAdobe',
  TESTCASE: 'removingFromBookmarks'],
[
  jobTitle: 'Analytics Adobe - search - MWBU-13809',
  COMPONENT: 'analyticsAdobe',
  TESTCASE: 'search'],
[
  jobTitle: 'Analytics Adobe - subsVarsAnonUsers - MWBU-13613',
  COMPONENT: 'analyticsAdobe',
  TESTCASE: 'subsVarsAnonUsers'],
[
  jobTitle: 'Analytics Adobe - startSubsFreeTrialNoPlan - MWBU-13568',
  COMPONENT: 'analyticsAdobe',
  TESTCASE: 'startSubsFreeTrialNoPlan'],
[
  jobTitle: 'Analytics Adobe - terminatedAccount - MWBU-14063',
  COMPONENT: 'analyticsAdobe',
  TESTCASE: 'terminatedAccount'],
[
  jobTitle: 'Analytics Adobe - userNavigatesAcrossMtod - MWBU-13813',
  COMPONENT: 'analyticsAdobe',
  TESTCASE: 'userNavigatesAcrossMtod'],
[
  jobTitle: 'Run Locally - Analytics Adobe - campaignTag - MWBU-13506',
  COMPONENT: 'analyticsAdobe',
  TESTCASE: 'campaignTag'],
[
  jobTitle: 'Analytics Adobe - seasonDropdown - MWBU-14925',
  COMPONENT: 'analyticsAdobe',
  TESTCASE: 'seasonDropdown']
]
*/

def path = 'QA-Selenium/MTOD/Regression Tests/Staging/';
def server = 'staging';
def tool = "'''";

jobsList.each{ currJob -> 
  pipelineJob("${path}" + "${currJob["jobTitle"]}") {
    definition {
      cps {
        script('''
pipeline {
  agent {
    kubernetes {
      inheritFrom 'qa-automation-npm'
      label 'npm'
      yaml ''' + "${tool}" + '''
      spec:
        containers:
          - name: npm
            image: 363308097987.dkr.ecr.us-west-2.amazonaws.com/jenkins-slave:node-05-15-2022
            command:
            - cat
            tty: true
        dnsPolicy: None
        dnsConfig:
            nameservers:
              - 169.254.20.10
              - 172.20.0.10
            searches:
              - selenium.svc.cluster.local
              - svc.cluster.local
              - cluster.local
              - ec2.internal
              - us-west-2.compute.internal
            options:
              - name: ndots
                value: "1"
              - name: attempts
                value: "3"
              - name: timeout
                value: "1"
              - name: rotate'''
             + "${tool}" + '''
    }
  }
  parameters {
    choice(choices: ['staging', 'www', 'preprod', 'dev'], description: '', name: 'ENV')
    string(defaultValue: 'main', description: '', name: 'BRANCH', trim: false)
    string(defaultValue: ''' + "'${currJob["COMPONENT"]}'" + ''', description: '', name: 'COMPONENT', trim: false)
    string(defaultValue: ''' + "'${currJob["TESTCASE"]}'" + ''', description: '', name: 'TESTCASE', trim: false)
    string(defaultValue: '3', description: '', name: 'SLEEP', trim: false)
    string(defaultValue: '60', description: '', name: 'CHECKOUT_TIMEOUT', trim: false)
    string(defaultValue: '130', description: '', name: 'BUILD_TIMEOUT', trim: false)
    string(defaultValue: '360', description: '', name: 'TEST_TIMEOUT', trim: false)
    choice(choices: ['', '--loglevel warn', '--loglevel verbose'], 
    description: ' Select a log level, or leave empty if log is not needed', name: 'LOGLEVEL')
    password(name: 'PASSWORD', description: 'Email pass')
    password(name: 'BREACHED_PASSWORD', description: 'BREACHED Pass')
    password(name: 'ORG_PASSWORD', description: 'Org pass')
    password(name: 'BASIC_AUTH_USERNAME', description: 'BASIC AUTH Username')
    password(name: 'BASIC_AUTH_PASSWORD', description: 'BASIC AUTH Password')
  }
  stages {
    stage('What Node') {
      steps {
          container('npm') {
            echo "we are running"
            sh "sleep 10; node -v"
          }
      }
    }
    stage('Checkout') {
        steps {
            script {
            try {
                timeout(time: "${CHECKOUT_TIMEOUT}" as Integer, unit: 'SECONDS') {
                    git branch: '${BRANCH}',
                        credentialsId: 'github',
                        url: 'git@github.com:motortrend/motortrend-on-demand-web-automation.git'
                }
            } catch (err) {
                    retry(3) {
                        echo(err)
                        sleep(time:"${SLEEP}" as Integer,unit:"SECONDS")
                        timeout(time: "${CHECKOUT_TIMEOUT}" as Integer, unit: 'SECONDS') {
                        git branch: '${BRANCH}',
                            credentialsId: 'github',
                            url: 'git@github.com:motortrend/motortrend-on-demand-web-automation.git'
                        }
                    }
                }
            }
        }
    }
    stage('Build'){
        steps {
            script {
                container ('qa-automation-npm'){
                     environment { 
                        PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true
                    }
                    try {
                        timeout(time: "${BUILD_TIMEOUT}" as Integer, unit: 'SECONDS') {
                            sh 'npm install --omit=dev ${LOGLEVEL}'
                        }
                    } catch (err) {
                        echo "Build did not complete in 130 seconds, let's retry"
                        retry(3) {
                            sleep(time:"${SLEEP}" as Integer,unit:"SECONDS")
                            timeout(time: "${BUILD_TIMEOUT}" as Integer, unit: 'SECONDS') {
                                sh 'npm install --omit=dev ${LOGLEVEL}'
                            }
                        }
                    }
                    
                    stage('Regression Test') {
                      retry(3) {
                        try {
                            sleep(time:"${SLEEP}" as Integer,unit:"SECONDS")
                            timeout(time: "${TEST_TIMEOUT}" as Integer, unit: 'SECONDS') {
                                withCredentials([string(credentialsId: 'MTODPW', variable: 'PASSWORD'), string(credentialsId: 'OrgPw', variable: 'ORG_PASSWORD'), string(credentialsId: 'BreachedPW', variable: 'BREACHED_PASSWORD'), string(credentialsId: 'BASIC_AUTH_USERNAME', variable: 'BASIC_AUTH_USERNAME'), string(credentialsId: 'BASIC_AUTH_PASSWORD', variable: 'BASIC_AUTH_PASSWORD')]) {
                                sh 'COMPONENT=${COMPONENT} TESTCASE=${TESTCASE} ENV=${ENV} PASSWORD=${PASSWORD} BREACHED_PASSWORD=${BREACHED_PASSWORD} ORG_PASSWORD=${ORG_PASSWORD} BASIC_AUTH_USERNAME=${BASIC_AUTH_USERNAME} BASIC_AUTH_PASSWORD=${BASIC_AUTH_PASSWORD} npm run devtools-kubernetes'
                                }
                            }
                        } catch (err) {
                            error "Test did not complete in ${TEST_TIMEOUT} seconds"
                        }
                      }
                    }
                }
            }
        }
    }
  }
}
                              '''
          )
        }
      }
    }
}

// The following are to generate set jobs dynamically based in number of jobTitles
// Number of expected set jobs
def numberOfSetJobs = 8
def maxStagesPerJob = Math.round(Math.ceil(jobsList.size/numberOfSetJobs))
// String used to dynamically build the job stages (i.e. jobTitles included in the set)
def setJobStages = ""
// Array holding copies of the above string, the final set jobs will be generated using these
def setJobsStagesStrings = []

jobsList.eachWithIndex{ currJob, currJobIndex -> 
  def int currentJobSet = Math.round(Math.floor(currJobIndex/maxStagesPerJob))
  if (setJobsStagesStrings.size < currentJobSet + 1) {
    setJobsStagesStrings.add([
      jobName: "${path}${currentJobSet + 1} - Set Job ${currentJobSet + 1}",
      jobStages: "",
    ])
  }

  setJobsStagesStrings[currentJobSet]["jobStages"] = setJobsStagesStrings[currentJobSet]["jobStages"] + '''
  catchError(buildResult: 'FAILURE', stageResult: 'FAILURE') {
      stage(''' + "'${currJob["jobTitle"]}'" + ''') {
          build job: ''' + "'${currJob["jobTitle"]}'" + ''', parameters: [string(name: 'ENV', value: String.valueOf(ENV)), string(name: 'BRANCH', value: String.valueOf(BRANCH))]
    }
  }
'''
}

def triggerString = ""

setJobsStagesStrings.each {stagesString ->
  triggerString = triggerString + "${stagesString["jobName"]},"
  pipelineJob("${stagesString["jobName"]}") {
    parameters {
      stringParam("ENV", "${server}", "Environment being used for testing")
      stringParam('BRANCH', 'main', '')
    }
    definition {
      cps {
        script("${stagesString["jobStages"]}")
      }
    }
  }
}

job("${path}/0 - Run all set jobs") {
  parameters {
    stringParam("ENV", "${server}", "Environment being used for testing")
    stringParam('BRANCH', 'main', '')
  }
  triggers {
    cron '''H 20 * * 0-5'''
  }
  steps {
        shell('''
          set ENV=$ENV
          echo Environment is $ENV
          set BRANCH=$BRANCHs
          echo Environment is $BRANCH
          echo "triggerString: ''' + "${triggerString}" + '''"
        ''')
  }
  publishers {
    downstreamParameterized {
      trigger(triggerString) {
        condition('SUCCESS')
        parameters {
          currentBuild()
        }
      }
    }
  }
}
